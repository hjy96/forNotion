<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CI/CD Pipeline Architecture | Portfolio</title>

    <style>
        :root {
            --bg: #f6f7fb;
            --card: #ffffff;
            --line: #e5e7eb;
            --text: #111827;
            --sub: #475569;
            --accent: #2563eb;
            --good: #16a34a;
            --warn: #d97706;
            --code-bg: #0f172a;
            --code-text: #e5e7eb;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Pretendard",
            "Inter", "Segoe UI", Roboto, Arial, sans-serif;
            line-height: 1.65;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 48px 20px 80px;
        }

        h1 { font-size: 28px; margin-bottom: 8px; }

        h2 {
            margin: 42px 0 14px;
            font-size: 22px;
            border-left: 5px solid var(--accent);
            padding-left: 14px;
        }

        h3 {
            margin: 22px 0 10px;
            font-size: 16px;
            color: var(--sub);
        }

        p { margin: 6px 0 14px; color: #374151; }

        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 999px;
            background: #eef2ff;
            color: var(--accent);
            font-size: 12px;
            font-weight: 600;
            margin-right: 6px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin: 18px 0 26px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 16px;
            padding: 16px 18px;
        }

        .card b { color: var(--accent); }

        .diagram {
            background: var(--code-bg);
            color: var(--code-text);
            border-radius: 16px;
            padding: 18px;
            font-size: 13px;
            white-space: pre;
            overflow-x: auto;
        }

        ul { margin: 10px 0 0; padding-left: 18px; }

        footer {
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid var(--line);
            color: #475569;
            font-size: 14px;
        }
    </style>
</head>

<body>
<div class="container">

    <span class="badge">CI/CD</span>
    <span class="badge">Kubernetes</span>
    <span class="badge">On-Premise</span>

    <h1>CI/CD 파이프라인 설계 및 구축</h1>
    <p>
        사내망 기반 환경에서 <b>코드 빌드 → 이미지 생성 → 배포</b>까지
        자동화된 CI/CD 파이프라인을 설계하고 운영했습니다.
        외부 SaaS에 의존하지 않고, 내부 인프라만으로 안정적인 배포 흐름을 구성했습니다.
    </p>

    <h2>1. 전체 CI/CD 흐름</h2>
    <div class="diagram">
        [ Developer Push ]
        │
        ▼
        [ Internal Git Server ]
        │
        ▼
        [ Jenkins Pipeline (Kubernetes Agent) ]
        │
        ├─ Version Check / Changelog
        ├─ Docker Build (Kaniko)
        ├─ Image Cache & Reuse
        ▼
        [ Private Container Registry ]
        │
        ▼
        [ Kubernetes Cluster ]
        │
        ├─ Dev Rollout (Rolling Update)
        └─ Production Blue / Green Deploy
    </div>

    <h2>2. Docker Image 설계</h2>
    <div class="grid">
        <div class="card">
            <b>Multi-stage Build</b>
            <ul>
                <li>Dependency / Build / Runtime 단계 분리</li>
                <li>최종 이미지 경량화</li>
            </ul>
        </div>

        <div class="card">
            <b>Runtime 안정성</b>
            <ul>
                <li>Non-root 사용자 실행</li>
                <li>Health Check 내장</li>
            </ul>
        </div>

        <div class="card">
            <b>관측성</b>
            <ul>
                <li>OpenTelemetry 자동 계측</li>
                <li>운영 환경 트레이싱 고려</li>
            </ul>
        </div>
    </div>

    <h2>3. Jenkins Pipeline 전략</h2>
    <div class="grid">
        <div class="card">
            <b>이미지 중복 빌드 방지</b>
            <p>
                Registry API를 통해 동일 버전 이미지 존재 여부를 확인하고,
                존재할 경우 빌드를 생략하고 태그만 추가.
            </p>
        </div>

        <div class="card">
            <b>Kaniko 기반 빌드</b>
            <p>
                Docker-in-Docker 없이 Kubernetes 환경에서
                안전하게 이미지 빌드.
            </p>
        </div>

        <div class="card">
            <b>배포 실패 대응</b>
            <p>
                Rollout 상태를 감시하고,
                실패 시 자동으로 이전 버전으로 Rollback.
            </p>
        </div>
    </div>

    <h2>4. 버전 관리 & 릴리즈 전략</h2>
    <p>
        VERSION 파일을 단일 기준으로 사용하여
        <b>명시적인 배포 단위</b>를 생성하고,
        CI/CD 파이프라인과 직접 연결했습니다.
    </p>

    <div class="diagram">
        [ Developer ]
        │ yarn version:patch | minor | major
        ▼
        [ VERSION Update ]
        ├─ Git Commit (Deploy: x.y.z)
        ├─ Git Tag (x.y.z)
        └─ CI/CD Trigger
    </div>

    <h2>5. 운영 환경 배포 전략 (Blue / Green)</h2>
    <p>
        운영 환경에서는 서비스 중단을 최소화하기 위해
        <b>Blue / Green 배포 전략</b>을 적용했습니다.
    </p>

    <div class="diagram">
        [ Production ]
        ├─ Blue  (Current)
        │     └─ Version x.y.z
        │
        ├─ Green (New)
        │     └─ Version x.y.(z+1)
        │
        └─ Traffic Switch
        ├─ Health Check OK → Green 활성화
        └─ 문제 발생 시 → Blue 유지
    </div>

    <div class="grid">
        <div class="card">
            <b>무중단 배포</b>
            <p>
                신규 버전을 기존 서비스와 분리된 환경에 배포한 후
                검증이 완료되면 트래픽을 전환.
            </p>
        </div>

        <div class="card">
            <b>즉시 롤백 가능</b>
            <p>
                장애 발생 시
                트래픽을 기존 Blue 환경으로 즉시 복구.
            </p>
        </div>

        <div class="card">
            <b>배포 안정성</b>
            <p>
                운영 서버 다중 대상 병렬 배포로
                배포 리스크 최소화.
            </p>
        </div>
    </div>

    <h2>6. 운영 자동화</h2>
    <div class="grid">
        <div class="card">
            <b>Changelog 자동 생성</b>
            <p>Git Commit 기반 변경사항 자동 요약</p>
        </div>

        <div class="card">
            <b>Slack 알림</b>
            <p>빌드 / 배포 성공·실패 실시간 공유</p>
        </div>

        <div class="card">
            <b>안정성 관리</b>
            <p>Timeout / 재시도 / 동시 빌드 제어</p>
        </div>
    </div>

    <footer>
        <b>요약</b><br/>
        폐쇄망 환경에서 Docker, Jenkins, Kubernetes를 활용해
        개발·운영 환경을 분리하고,
        운영계에는 Blue / Green 배포 전략을 적용하여
        무중단 배포와 빠른 롤백이 가능한 CI/CD 파이프라인을 구축·운영했습니다.
    </footer>

</div>
</body>
</html>
